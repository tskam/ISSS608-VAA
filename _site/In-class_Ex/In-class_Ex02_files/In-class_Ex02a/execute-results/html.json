{
  "hash": "a1e5ab4e516be562b619b4294733bff0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"In-class Exercise 2\"\nauthor: Dr. Kam Tin Seong\ndate: \"April 17, 2024\"\ndate-modified: \"last-modified\"\nexecute: \n  eval: true\n  echo: true\n  warning: false\n  freeze: true\n---\n\n\n::: {.callout-note}\n## DIY\nTo getting started, you the step you learned in previous lesson, load tidyverse, ggdist and ggthemes R packages into RStudio environment.\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(tidyverse, ggdist, ggthemes)\n```\n:::\n\n\nBefore we move on to the next step, it is always a good practice to visit \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexam_df <- read_csv(\"data/Exam_data.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=exam_df, \n       aes(x = ENGLISH)) +\n  geom_histogram(color = \"black\",\n                 fill = \"light blue\")       \n```\n\n::: {.cell-output-display}\n![](In-class_Ex02a_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam_df, \n       aes(x = ENGLISH)) +\n  geom_density(\n    color = \"#1696d2\",\n    adjust = .65,\n    alpha = .6\n  )\n```\n\n::: {.cell-output-display}\n![](In-class_Ex02a_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmedian_eng <- median(exam_df$ENGLISH)\nmean_eng <- mean(exam_df$ENGLISH)\nstd_eng <- sd(exam_df$ENGLISH)\n\nggplot(exam_df, \n       aes(x = ENGLISH)) +\n  geom_density(\n    color = \"#1696d2\",\n    adjust = .65,\n    alpha = .6) +\n  stat_function(\n    fun = dnorm,\n    args = list(mean = mean_eng,\n                sd = std_eng),\n    col = \"grey30\",\n    size = .8) +\n  geom_vline(\n    aes(xintercept = mean_eng),\n    colour=\"#4d5887\", \n    linewidth = .6, \n    linetype = \"dashed\") +\n  annotate(geom = \"text\", \n           x = mean_eng - 8, \n           y = 0.04,\n           label = paste0(\"Mean ENGLISH: \",\n                          round((mean_eng), 2)),\n           color = \"#4d5887\") +\n  geom_vline(\n    aes(xintercept = median_eng),\n    colour = \"#00AFBB\", \n    linewidth = .6, \n    linetype = \"dashed\") +\n  annotate(geom = \"text\", \n           x = median_eng + 8, \n           y = 0.04,\n           label = paste0(\"Median ENGLISH: \", \n                   round((median_eng),2)),\n    color = \"#00AFBB\") +\n  labs(\n    title = \"Uneven Distribution of ENGLISH Score across Participants\",\n    subtitle = \"Median ENGLISH score is close to Mean score, but distribution density reveals multiple peaks and troughs\",\n    x = \"ENGLISH Score\") +\n  theme(\n    axis.title.y = element_blank(),\n    axis.text.y = element_blank(),\n    panel.grid.major = element_blank(),\n    plot.background = element_rect(\n      fill=\"#F8F3E6\",\n      colour=\"#F8F3E6\")\n  )\n```\n\n::: {.cell-output-display}\n![](In-class_Ex02a_files/figure-html/unnamed-chunk-5-1.png){width=960}\n:::\n:::\n\n\n## Visualising Distribution\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = exam_df,\n       aes(y = ENGLISH,\n           x = RACE)) +\n  geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](In-class_Ex02a_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n## function to return median and labels\nn_fun <- function(x){\n  return(data.frame(y = median(x) + 2.5, \n                    label = paste0(\"n = \",length(x))))\n}\n\nggplot(data = exam_df,\n       aes(y = ENGLISH,\n           x = RACE)) +\n  geom_boxplot() +\n  stat_summary(\n    geom = \"text\",\n    fun.data = n_fun,\n    size = 3.5)\n```\n\n::: {.cell-output-display}\n![](In-class_Ex02a_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = exam_df,\n       aes(y = ENGLISH,\n           x = RACE)) +\n  geom_boxplot(fill = \"light blue\", \n               varwidth = TRUE)\n```\n\n::: {.cell-output-display}\n![](In-class_Ex02a_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n### Plotting a Half Eye graph\n\nFirst, we will plot a Half-Eye graph by using [`stat_halfeye()`](https://mjskay.github.io/ggdist/reference/stat_halfeye.html) of **ggdist** package.\n\nThis produces a Half Eye visualization, which is contains a half-density and a slab-interval.\n\n::: panel-tabset\n## The plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](In-class_Ex02a_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n## The code chunk\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam_df, \n       aes(x = RACE, \n           y = ENGLISH)) +\n  stat_halfeye(adjust = 0.5,\n               justification = -0.2,\n               .width = 0,\n               point_colour = NA)\n```\n:::\n\n\n::: callout-tip\n## Things to learn from the code chunk above\n\nWe remove the slab interval by setting .width = 0 and point_colour = NA.\n:::\n:::\n\n### Adding the boxplot with `geom_boxplot()`\n\nNext, we will add the second geometry layer using [`geom_boxplot()`]() of ggplot2. This produces a narrow boxplot. We reduce the width and adjust the opacity.\n\n::: panel-tabset\n## The plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam_df, \n       aes(x = RACE, \n           y = ENGLISH)) +\n  stat_halfeye(adjust = 0.5,\n               justification = -0.2,\n               .width = 0,\n               point_colour = NA) +\n  geom_boxplot(width = .20,\n               outlier.shape = NA)\n```\n:::\n\n\n## The code chunk\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](In-class_Ex02a_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n:::\n\n### Adding the Dot Plots with `stat_dots()`\n\nNext, we will add the third geometry layer using [`stat_dots()`](https://mjskay.github.io/ggdist/reference/stat_dots.html) of ggdist package. This produces a half-dotplot, which is similar to a histogram that indicates the number of samples (number of dots) in each bin. We select side = \"left\" to indicate we want it on the left-hand side.\n\n::: panel-tabset\n## The plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](In-class_Ex02a_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n## The code chunk\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam_df, \n       aes(x = RACE, \n           y = ENGLISH)) +\n  stat_halfeye(adjust = 0.5,\n               justification = -0.2,\n               .width = 0,\n               point_colour = NA) +\n  geom_boxplot(width = .20,\n               outlier.shape = NA) +\n  stat_dots(side = \"left\", \n            justification = 1.2, \n            binwidth = .5,\n            dotsize = 2)\n```\n:::\n\n:::\n\n### Finishing touch\n\nLastly, [`coord_flip()`](https://ggplot2.tidyverse.org/reference/coord_flip.html) of ggplot2 package will be used to flip the raincloud chart horizontally to give it the raincloud appearance. At the same time, `theme_economist()` of ggthemes package is used to give the raincloud chart a professional publishing standard look.\n\n::: panel-tabset\n## The plot\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](In-class_Ex02a_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n## The code chunk\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(exam_df, \n       aes(x = RACE, \n           y = ENGLISH)) +\n  stat_halfeye(adjust = 0.5,\n               justification = -0.2,\n               .width = 0,\n               point_colour = NA) +\n  geom_boxplot(width = .20,\n               outlier.shape = NA) +\n  stat_dots(side = \"left\", \n            justification = 1.2, \n            binwidth = .5,\n            dotsize = 1.5) +\n  coord_flip() +\n  theme_economist()\n```\n:::\n\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = exam_df,\n       aes(x = ENGLISH,\n           y = MATHS)) + \n  geom_point()\n```\n\n::: {.cell-output-display}\n![](In-class_Ex02a_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "In-class_Ex02a_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}